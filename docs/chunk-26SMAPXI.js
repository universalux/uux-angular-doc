import{a as X,b as j,c as Y}from"./chunk-Q2LTGCKE.js";import{a as B}from"./chunk-GGX4UDWW.js";import{Ba as d,Bb as H,Ca as A,Da as O,Db as U,Ea as x,Fa as F,Ga as N,Ha as c,Ia as u,Ja as g,Ka as h,La as I,Ma as w,Na as y,Pa as T,Q as M,Ra as m,Ta as l,U as _,V as f,W as S,a as R,ab as D,ba as s,cb as E,da as k,eb as V,fb as v,ga as P,kb as $,la as o,lb as L,nb as q,ob as p,sa as C}from"./chunk-DJ42HLST.js";var Q="[_nghost-%COMP%]{display:block;height:100%}.ratingIcon__fill[_ngcontent-%COMP%]{fill:var(--icon-filled-color, gold)}.ratingIcon__stroke[_ngcontent-%COMP%]{fill:transparent;stroke:var(--icon-stroke-color, white);stroke-width:var(--icon-stroke-width, 10%);stroke-linejoin:round;stroke-linecap:round}.ratingIcon__emptyFill[_ngcontent-%COMP%]{fill:var(--icon-empty-color, transparent)}";function W(i,a){if(i&1&&h(0,"rating-star",2),i&2){let e=l(2).$implicit;c("itemPercentage",e)}}function Z(i,a){if(i&1&&h(0,"rating-heart",2),i&2){let e=l(2).$implicit;c("itemPercentage",e)}}function ee(i,a){if(i&1&&A(0,W,1,1,"rating-star",2)(1,Z,1,1,"rating-heart",2),i&2){let e=l(2);O(e.icon()==="star"?0:e.icon()==="heart"?1:-1)}}function te(i,a){if(i&1&&h(0,"rating-star",2),i&2){let e=l(2).$implicit;c("itemPercentage",e)}}function ne(i,a){if(i&1&&h(0,"rating-heart",2),i&2){let e=l(2).$implicit;c("itemPercentage",e)}}function ie(i,a){if(i&1){let e=T();u(0,"button",3),m("mouseenter",function(){_(e);let n=l().$index,r=l();return f(r.setVote(n))})("mouseleave",function(){_(e);let n=l(2);return f(n.cancelVote())})("click",function(){_(e);let n=l(2);return f(n.sendVote())})("focus",function(){_(e);let n=l().$index,r=l();return f(r.setVote(n))})("blur",function(){_(e);let n=l(2);return f(n.cancelVote())})("keydown",function(n){_(e);let r=l().$index,b=l();return f(b.onKeydown(n,r))}),A(1,te,1,1,"rating-star",2)(2,ne,1,1,"rating-heart",2),g()}if(i&2){let e,t=l().$index,n=l();d("aria-checked",n.currentVote()===t+1)("aria-label",(e=n.acc().buttonInteractiveAriaLabel)==null?null:e(t+1,n.items())),o(),O(n.icon()==="star"?1:n.icon()==="heart"?2:-1)}}function ae(i,a){if(i&1&&A(0,ee,2,1)(1,ie,3,3,"button",1),i&2){let e=l();O(e.readOnly()?0:1)}}var re=(()=>{class i{itemPercentage=p(0);uniqueId=s(this.generateUniqueId());generateUniqueId(e="rating-star"){let t=Math.random().toString(36).substring(2,10);return`${e}-${t}`}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=C({type:i,selectors:[["rating-star"]],inputs:{itemPercentage:[1,"itemPercentage"]},decls:9,vars:7,consts:[["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","width","100%","height","100%"],["d","M21.96 8.27l-5.92-.9-2.35-5.03c-.29-.62-.92-1.11-1.61-1.11-.7 0-1.32.49-1.61 1.11L8.96 7.37l-5.92.9c-.51.08-.92.43-1.09.94-.16.51-.04 1.07.32 1.45l4.32 4.43-1.02 6.25c-.08.64.2 1.28.83 1.65.63.37 1.46.41 2.13.1l4.12-2.28 4.12 2.28c.21.11.44.17.66.17.28 0 .56-.08.8-.23.63-.37.91-1.01.83-1.65l-1.02-6.25 4.32-4.43c.36-.37.48-.93.32-1.45-.16-.51-.58-.86-1.09-.94z"],["x","0","y","0","width","24","height","24","fill","black"],["x","0","y","0","height","24","fill","white"],[1,"ratingIcon__emptyFill"],[1,"ratingIcon__fill"],["stroke-width","1.5",1,"ratingIcon__stroke"]],template:function(t,n){t&1&&(S(),I(0,"svg",0)(1,"defs"),y(2,"path",1),I(3,"mask"),y(4,"rect",2)(5,"rect",3),w()(),y(6,"use",4)(7,"use",5)(8,"use",6),w()),t&2&&(o(2),d("id",n.uniqueId()+"star"),o(),d("id",n.uniqueId()+"star-fill-mask"),o(2),d("width",n.itemPercentage()/100*24),o(),d("href","#"+n.uniqueId()+"star"),o(),d("href","#"+n.uniqueId()+"star")("mask","url(#"+n.uniqueId()+"star-fill-mask)"),o(),d("href","#"+n.uniqueId()+"star"))},styles:["[_nghost-%COMP%]{display:block;height:100%}.ratingIcon__fill[_ngcontent-%COMP%]{fill:var(--icon-filled-color, gold)}.ratingIcon__stroke[_ngcontent-%COMP%]{fill:transparent;stroke:var(--icon-stroke-color, white);stroke-width:var(--icon-stroke-width, 10%);stroke-linejoin:round;stroke-linecap:round}.ratingIcon__emptyFill[_ngcontent-%COMP%]{fill:var(--icon-empty-color, transparent)}"],changeDetection:0})}return i})(),oe=(()=>{class i{itemPercentage=p(0);uniqueId=s(this.generateUniqueId());generateUniqueId(e="rating-heart"){let t=Math.random().toString(36).substring(2,10);return`${e}-${t}`}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=C({type:i,selectors:[["rating-heart"]],inputs:{itemPercentage:[1,"itemPercentage"]},decls:9,vars:7,consts:[["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 23","width","100%","height","100%"],[1,"path"],["d",`M12 5.50063C7.50016 0.825464 2 4.27416 2 9.1371C2 14 6.01943 16.5914 8.96173 18.9109C10 19.7294 11 20.5 12 20.5
     M12 5.50063C16.4998 0.825464 22 4.27416 22 9.1371C22 14 17.9806 16.5914 15.0383 18.9109C14 19.7294 13 20.5 12 20.5`,"transform","translate(-0.6, -1.5) scale(1.05, 1.1)"],["x","0","y","0","width","24","height","23","fill","black"],["x","0","y","0","height","24","fill","white"],[1,"ratingIcon__emptyFill"],[1,"ratingIcon__fill"],[1,"ratingIcon__stroke"]],template:function(t,n){t&1&&(S(),I(0,"svg",0)(1,"defs",1),y(2,"path",2),I(3,"mask"),y(4,"rect",3)(5,"rect",4),w()(),y(6,"use",5)(7,"use",6)(8,"use",7),w()),t&2&&(o(2),d("id",n.uniqueId()+"heart"),o(),d("id",n.uniqueId()+"heart-fill-mask"),o(2),d("width",n.itemPercentage()/100*24),o(),d("href","#"+n.uniqueId()+"heart"),o(),d("href","#"+n.uniqueId()+"heart")("mask","url(#"+n.uniqueId()+"heart-fill-mask)"),o(),d("href","#"+n.uniqueId()+"heart"))},styles:[Q],changeDetection:0})}return i})(),z={en:{containerReadOnlyAriaLabel:"Average rating",containerInteractiveAriaLabel:"Rating selector",buttonInteractiveAriaLabel:(i,a)=>`Select ${i} of ${a}`},es:{containerReadOnlyAriaLabel:"Valoraci\xF3n media",containerInteractiveAriaLabel:"Selector de valoraci\xF3n",buttonInteractiveAriaLabel:(i,a)=>`Seleccionar ${i} de ${a}`},fr:{containerReadOnlyAriaLabel:"Note moyenne",containerInteractiveAriaLabel:"S\xE9lecteur de note",buttonInteractiveAriaLabel:(i,a)=>`S\xE9lectionner ${i} sur ${a}`},de:{containerReadOnlyAriaLabel:"Durchschnittliche Bewertung",containerInteractiveAriaLabel:"Bewertungsauswahl",buttonInteractiveAriaLabel:(i,a)=>`${i} von ${a} ausw\xE4hlen`},it:{containerReadOnlyAriaLabel:"Valutazione media",containerInteractiveAriaLabel:"Selettore di valutazione",buttonInteractiveAriaLabel:(i,a)=>`Seleziona ${i} su ${a}`}},G=(()=>{class i{el=M(P);items=p(5);average=p(0);readOnly=p(!1);vote=q();icon=p("star");hover=p(["scale"]);lang=p("en");customAria=p(null);itemsAverages=s([]);currentVote=s(0);clampedAverage=$(()=>{let e=this.average(),t=this.items(),n=0;return typeof e!="number"||isNaN(e)?0:Math.min(t,Math.max(n,e))});acc=s(z.en);firstRender=!0;ngOnInit(){this.updateItems(this.clampedAverage()),this.setAccOptions(),this.firstRender=!1}ngOnChanges(e){(e.average||e.items&&!this.firstRender)&&this.updateItems(this.clampedAverage()),(e.lang||e.customAria)&&this.setAccOptions(),e.hover&&this.hover()!=="none"&&this.el.nativeElement.style.setProperty("--hover-transform",this.getHoverTransform())}ngAfterViewInit(){this.hover()!=="none"&&this.el.nativeElement.style.setProperty("--hover-transform",this.getHoverTransform())}setVote(e){let t=e+1;this.updateItems(t),this.currentVote.set(t)}cancelVote(){this.currentVote.set(null),this.updateItems(this.average())}sendVote(){this.currentVote()&&this.vote.emit(this.currentVote())}focusItem(e){this.el.nativeElement.querySelectorAll(".ratingItemButton")[e].focus()}onKeydown(e,t){let n=this.items();if(e.key==="ArrowRight"){let r=Math.min(t+1,n-1);this.focusItem(r),e.preventDefault()}if(e.key==="ArrowLeft"){let r=Math.max(t-1,0);this.focusItem(r),e.preventDefault()}(e.key===" "||e.key==="Enter")&&(this.setVote(t),this.sendVote(),e.preventDefault())}updateItems(e){let t=e,n=this.items(),r=[];for(let b=1;b<=n;b++)t>=1?(r.push(100),t--):t<1&&t>0?(r.push(Math.floor(t*100)),t=0):r.push(0);this.itemsAverages.set(r)}setAccOptions(){let e=this.lang()??"en",t=z[e],n=this.customAria()??{};this.acc.set(R(R({},t),n))}getHoverTransform(){let e=[];return this.hover().includes("scale")&&e.push("scale(var(--rating-hover-scale, 1.1))"),this.hover().includes("rotateX")&&e.push("rotate(var(--rating-hover-rotateX, 15deg))"),this.hover().includes("translateY")&&e.push("translateY(var(--rating-hover-translateY,  -5px))"),e.join(" ")}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=C({type:i,selectors:[["ng-ratings"]],inputs:{items:[1,"items"],average:[1,"average"],readOnly:[1,"readOnly"],icon:[1,"icon"],hover:[1,"hover"],lang:[1,"lang"],customAria:[1,"customAria"]},outputs:{vote:"vote"},features:[k],decls:3,vars:2,consts:[[1,"ratingContainer"],["role","radio",1,"ratingItemButton","hoverEffects"],[3,"itemPercentage"],["role","radio",1,"ratingItemButton","hoverEffects",3,"mouseenter","mouseleave","click","focus","blur","keydown"]],template:function(t,n){t&1&&(u(0,"div",0),F(1,ae,2,1,null,null,x),g()),t&2&&(d("role",n.readOnly()?null:"radiogroup")("aria-label",n.readOnly()?n.acc().containerReadOnlyAriaLabel:n.acc().containerInteractiveAriaLabel),o(),N(n.itemsAverages()))},dependencies:[re,oe],styles:["[_nghost-%COMP%]{display:block}.ratingContainer[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;filter:drop-shadow(var(--rating-shadow, 2px 2px 5px rgba(0, 0, 0, .548)))}.ratingItemButton[_ngcontent-%COMP%]{background:transparent;border:none;cursor:pointer;height:100%}.ratingItemButton.hoverEffects[_ngcontent-%COMP%]:hover   rating-star[_ngcontent-%COMP%]     svg, .ratingItemButton.hoverEffects[_ngcontent-%COMP%]:hover   rating-heart[_ngcontent-%COMP%]     svg{transform-origin:center;transition:transform var(--rating-hover-transition-duration, .3s) ease-in-out;transform:var(--hover-transform)}.ratingItemButton[_ngcontent-%COMP%]:focus-visible{outline:var(--rating-focus-ring, 2px solid var(--rating-stroke-color, white));outline-offset:2px}rating-star[_ngcontent-%COMP%]     svg, rating-heart[_ngcontent-%COMP%]     svg{transition:transform var(--rating-hover-transition-duration, .3s) ease-in-out;height:100%}rating-star[_ngcontent-%COMP%], rating-heart[_ngcontent-%COMP%]{padding:0 var(--rating-item-x-padding, .3rem);--icon-filled-color: var(--rating-filled-color, gold);--icon-stroke-color: var(--rating-stroke-color, white);--icon-stroke-width: var(--rating-stroke-width, .7);--icon-empty-color: var(--rating-empty-color, transparent)}rating-heart[_ngcontent-%COMP%]{--icon-filled-color: var(--rating-filled-color, red)}"],changeDetection:0})}return i})();var se=()=>["5","3","4","7","10"],le=()=>["false","true"],ce=()=>["true","false"],ue=()=>["star","heart"],ge=()=>["scale","rotateX","translateY"],de=()=>["en","es","it","fr","de"],me=()=>["null","custom aria example"],K=class i{items=s(5);readOnly=s(!1);average=s(2.5);icon=s("star");hover=s(["scale"]);lang=s("en");customAria=s(null);voteOutput=s(!0);currentVote=s(null);handleReset(){this.currentVote.set(null)}showCode=s(!1);currentCode=s("");constructor(){L(()=>{let a=[];this.items()!==5&&a.push(`[items]="${this.items()}"`),this.average()&&a.push(`[average]="${this.average()}"`),this.readOnly()||a.push(`[readOnly]="${this.readOnly()}"`),this.voteOutput()&&a.push('(vote)="yourHandleVoteSignal.set($event)"'),this.icon()!=="star"&&a.push(`icon="${this.icon()}"`),this.hover()[0]!=="scale"&&this.hover().length===1&&a.push(`[hover]="${this.hover()}"`),this.lang()!=="en"&&a.push(`lang="${this.lang()}"`),this.customAria()&&a.push(`[customAria]="${JSON.stringify(this.customAria())}"`);let e=a.join(` 
`);this.currentCode.set(`
        <ng-ratings ${e?` 
`+e:""}
        />
      `)})}handleItemsInput(a){let e=a.target;this.items.set(+e.value)}handleAverageInput(a){let e=a.target;this.average.set(+e.value)}handleReadOnlyInput(a){let e=a.target;this.readOnly.set(e.value==="true")}handleVoteOuputInput(a){let e=a.target;this.voteOutput.set(e.value==="true")}handleIconInput(a){let e=a.target;this.icon.set(e.value)}get hoverArray(){let a=this.hover();return a==="none"?[]:a}handleHoverInput(a){let e=a.target,t=e.value,n=this.hover()==="none"?[]:this.hoverArray,r;e.checked?r=[...n,t]:r=n.filter(b=>b!==t),this.hover.set(r)}handleLangInput(a){let e=a.target;this.lang.set(e.value)}handleCustomAriaInput(a){a.target.value==="null"?this.customAria.set(null):this.customAria.set({containerReadOnlyAriaLabel:"CUSTOM - Average rating",containerInteractiveAriaLabel:"CUSTOM - Rating selector",buttonInteractiveAriaLabel:(t,n)=>`CUSTOM - Select ${t} of ${n}`})}toggleShowCode(){this.showCode.set(!this.showCode())}metaTagsService=M(H);ngOnInit(){this.metaTagsService.setMetaTags({title:"Ratings \u2022 UUX Angular",description:"UUX Rating component playground",image:"/components/ratings",url:"/components/ratings/playground",type:"website"})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=C({type:i,selectors:[["app-rating-playground"]],decls:26,vars:28,consts:[[1,"componentViewer","componentViewer--ratings"],[1,"componentView"],[3,"vote","items","average","readOnly","icon","hover","lang","customAria"],[3,"onClick"],[1,"codeViewer"],[1,"codeOptions"],["type","minimal","hover","tone",3,"onClick","square"],[3,"showCode"],[1,"codeView"],["language","html",3,"code"],[1,"componentOptions"],["label","Functionality inputs / outputs"],["name","items","description","Select how many items conforms the average",3,"changeFn","options"],["name","average","type","number","description","Set the average to show (only if not showVote)","placeholder","2.5",3,"changeFn"],["name","readOnly","description","Choose if the component only shows average or admits voting.",3,"changeFn","options"],["name","vote output","description","The (vote) output value turns into [average] input to show you its value",3,"changeFn","options"],["label","Style and behavior Inputs"],["name","icon","description","Choose between 'star' or 'heart' icon",3,"changeFn","options"],["name","hover","type","checkbox","description","Choose one or more hover effects","checked","scale",3,"changeFn","options"],["label","Accessibility Inputs"],["name","lang","description","Defines the language for built-in ARIA labels.",3,"changeFn","options"],["name","customAria","description","Provides custom ARIA labels to override default accessibility text.",3,"changeFn","options"]],template:function(e,t){e&1&&(u(0,"section",0)(1,"h3"),E(2),g(),u(3,"div",1)(4,"ng-ratings",2),m("vote",function(r){return t.voteOutput()?t.currentVote.set(r):null}),g(),u(5,"ng-simple-button",3),m("onClick",function(){return t.handleReset()}),E(6," Reset "),g()()(),u(7,"section",4)(8,"section",5)(9,"ng-simple-button",6),m("onClick",function(){return t.toggleShowCode()}),E(10),h(11,"app-pg-show-code-icon",7),g()(),u(12,"section",8),h(13,"app-code-block",9),g()(),u(14,"section",10)(15,"ng-expand",11)(16,"app-pg-input-selector",12),m("changeFn",function(r){return t.handleItemsInput(r)}),g(),u(17,"app-pg-input-selector",13),m("changeFn",function(r){return t.handleAverageInput(r)}),g(),u(18,"app-pg-input-selector",14),m("changeFn",function(r){return t.handleReadOnlyInput(r)}),g(),u(19,"app-pg-input-selector",15),m("changeFn",function(r){return t.handleVoteOuputInput(r)}),g()(),u(20,"ng-expand",16)(21,"app-pg-input-selector",17),m("changeFn",function(r){return t.handleIconInput(r)}),g(),u(22,"app-pg-input-selector",18),m("changeFn",function(r){return t.handleHoverInput(r)}),g()(),u(23,"ng-expand",19)(24,"app-pg-input-selector",20),m("changeFn",function(r){return t.handleLangInput(r)}),g(),u(25,"app-pg-input-selector",21),m("changeFn",function(r){return t.handleCustomAriaInput(r)}),g()()()),e&2&&(o(2),V("",t.currentVote()&&t.voteOutput()?`Current average: ${t.currentVote()}`:`Average: ${t.average()}`," "),o(2),c("items",t.items())("average",t.voteOutput()&&t.currentVote()?t.currentVote():t.average())("readOnly",t.readOnly())("icon",t.icon())("hover",t.hover())("lang",t.lang())("customAria",t.customAria()),o(5),c("square",!0),o(),V(" ",t.showCode()?"Hide code":"Show Code"," "),o(),c("showCode",t.showCode()),o(),D("show",t.showCode()),o(),c("code",t.currentCode()),o(3),c("options",v(21,se)),o(2),c("options",v(22,le)),o(),c("options",v(23,ce)),o(2),c("options",v(24,ue)),o(),c("options",v(25,ge)),o(2),c("options",v(26,de)),o(),c("options",v(27,me)))},dependencies:[X,j,Y,U,B,G],styles:["[_nghost-%COMP%]{display:block;width:100%}.componentViewer--ratings[_ngcontent-%COMP%]{flex-direction:column;height:fit-content;align-items:center;justify-content:center;gap:2rem}.componentView[_ngcontent-%COMP%]{height:100px;flex-direction:column;gap:2rem}ng-ratings[_ngcontent-%COMP%]{max-width:600px;max-height:50px}"],changeDetection:0})};export{K as RatingsPlayground};
